plugins {
  id 'java' // or 'groovy' Must be explicitly applied for shadow plugin
  id 'com.github.johnrengelman.shadow' version '1.2.3'
}

repositories {
    mavenCentral()
}

dependencies {
    compile('org.apache.poi:poi-ooxml:3.15-beta1') {
		// stax drags in javax-classes which are not allowed in Android
		//exclude group: 'stax'
		// xmlBeans 2.6.0 contains duplicate classes which the Android build does not allow
		//exclude group: 'org.apache.xmlbeans'
	}
}

/*task shadowJar(type: com.github.jengelman.gradle.plugins.shadow.tasks.ShadowJar) {
    archiveName = "poi-shadow-3.15-beta1.jar"
}*/

shadowJar {
    // Filtering shadow jar contents by file pattern.
    exclude 'LICENSE.txt'
    exclude 'META-INF/LICENSE'
    exclude 'META-INF/LICENSE.txt'
    exclude 'META-INF/NOTICE'
    exclude 'META-INF/NOTICE.txt'

    // Relocate javax dependencies so Android does not choke
    relocate 'javax.xml', 'aavax.xml'
}
